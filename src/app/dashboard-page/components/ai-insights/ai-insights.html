<div class="ai-widget">

  <header class="widget-header">
    <div class="title-group">
      <svg class="ai-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z">
        </path>
      </svg>
      <h3>AI Market Analysis</h3>
    </div>
    <span class="badge-ai">Beta</span>
  </header>

  <div class="insight-content" *ngIf="aiInsights; else loading">
    <div class="insight-text">
      {{ aiInsights }}
    </div>

    <div class="footer">
      <small>Generated at {{ now | date:'shortTime' }}</small>
      <button
        type="button"
        class="like-button"
        [class.liked]="liked"
        (click)="toggleLike()"
      >
        {{ liked ? 'Unlike' : 'Like' }}
      </button>
    </div>
  </div>

  <ng-template #loading>
    <div class="loading-container">
      <div class="skeleton-text full"></div>
      <div class="skeleton-text long"></div>
      <div class="skeleton-text medium"></div>
      <span class="loading-label">Analyzing market data...</span>
    </div>
  </ng-template>

</div>
